{% extends "base.html" %}

{% block content %}
<div class="container mx-auto ">
    {% if session %}
    <div class="flex justify-between items-center">
        <h1 class="text-2xl font-bold">Hello User</h1>
        <form method="post">
            <button type="submit" name="action" value="logout" class="btn btn-primary">Logout</button>
            <button type="submit" name="action" value="gen-api-key" class="btn btn-primary btn-outline">Gen API
                Key</button>
        </form>
    </div>

    <div class="divider"></div>
    {% endif %}


    {% if error %}
    <div role="alert" class="alert alert-error">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 shrink-0 stroke-current" fill="none" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        <span>{{error}}</span>
    </div>
    {% endif %}


    {%if api_key%}
    <div role="alert" class="alert alert-info">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-6 w-6 shrink-0 stroke-current">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        <span>Your API Key is here, store it in secure place. You won't able to retrive it again as the api is going
            to store in in hash. If you forget your API key, delete and recreate it.</span>
    </div>

    <div class="card p-4 border border-primary-200 mt-10">
        <span class="text-4xl font-mono">{{api_key}}</span>
    </div>
    {%endif%}


    {% if api_keys %}
    <div class="overflow-x-auto rounded-box border border-base-content/5 bg-base-100 mt-10 mb-10">
        <table class="table w-full">
            <thead class="bg-base-300">
                <tr>
                    <th></th>
                    <th>Api Keys</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                {% for api_key in api_keys %}
                <tr>
                    <th>{{loop.index}}</th>
                    <form method="post" name="edit-input" action="">
                        <td>
                            {{ api_key }}
                        </td>
                        <td>
                            <form method="post">
                                <button type="submit" name="delete_api" value="{{ api_key }}"
                                    class="btn btn-primary btn-outline">Delete</button>
                            </form>
                        </td>
                    </form>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% endif %}

</div>
{% endblock %}